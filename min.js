var jscrudapi=function(e){"use strict";var t="sticky_"+(""+Math.random()).replace(".",""),n=1,r=function(){return t+"".concat(++n)},o=r();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}
/*! (c) Andrea Giammarchi - ISC */var s,d=new WeakMap,v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.set(this,{v:new Map,f:new Map})}var t,n,r;return t=e,n=[{key:"all",value:function(e,t){var n=d.get(this),r=n.v,o=n.f;o.has(e)||o.set(e,new Set),o.get(e).add(t),r.has(e)&&Promise.resolve(r.get(e)).then(t)}},{key:"drop",value:function(e){var t=d.get(this),n=t.v,r=t.f;1<arguments.length?r.has(e)&&r.get(e).delete(arguments[1]):(n.delete(e),r.delete(e))}},{key:"that",value:function(e){var t=this;if(!(1<arguments.length))return function(n){return t.that(e,n)};var n=arguments[1],r=d.get(this),o=r.v,a=r.f;if(o.set(e,n),a.has(e)){var i,u=f(a.get(e));try{for(u.s();!(i=u.n()).done;){var l=i.value;l(n)}}catch(e){u.e(e)}finally{u.f()}}}},{key:"when",value:function(e){var t=this,n=d.get(this).v;return n.has(e)?Promise.resolve(n.get(e)):new Promise((function(n){t.all(e,(function r(o){t.drop(e,r),n(o)}))}))}}],n&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),y=new v;function h(e){for(var t="string"==typeof e?[e]:[e[0]],n=1,r=arguments.length;n<r;n++)t.push(arguments[n],e[n]);var o=document.createElement("style");return o.type="text/css",o.appendChild(document.createTextNode(t.join(""))),document.head.appendChild(o)}function p(e,t){e&&(e.value=t,function(e,t){document.documentElement.style.setProperty("--"+e,t)}(e.uid,e.value))}var m=/--([a-z]+[a-z0-9-]*)\s*(,\s*.+)*\)/gi,b=function(e){return(null==e?void 0:e.replace(/\s|,/g,""))||""};function g(e){return function(e){var t=e.view,n=e.model,a=void 0===n?{}:n,l=e.handleEvent,c=void 0===l?j:l,d=e.style,v=e.children,O=void 0===v?{}:v,A=e.init;if(!t||"function"!=typeof t)throw console.error("inputs leading to error:",{view:t,model:a,handleEvent:c,style:d,children:O}),"view property is missing!";r(),a.broadcast=function(e){var t,n=!1,r=f(k);try{for(r.s();!(t=r.n()).done;){(0,t.value)(e)&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}n&&y.that(o,"bound")},a.handleEvent=c;var S=function(e){var t,n,o={},a={};if(e)for(var l=0,c=Object.entries(e);l<c.length;l++){var d=i(c[l],2),v=d[0],y=d[1];o[v]=r();var g,w=y,j=f(u(y.matchAll(m)).map((function(e){return{name:e[1],value:b(e[2]),uid:r()}})));try{for(j.s();!(g=j.n()).done;){var O=g.value,A=O.name,S=O.value,k=O.uid;a[A]={value:S,uid:k};var E=new RegExp("--"+v);w=w.replace(E,"--"+k),p(a[A],S)}}catch(e){j.e(e)}finally{j.f()}h(s||(t=["\n                ."," {\n                    ","\n                }\n            "],(n=void 0)||(n=t.slice(0)),s=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),o[v],w)}return{classNameToUid:o,setCssVariable:function(e,t){return p(a[e],t)}}}(d);a.style=d?S.classNameToUid:{};for(var k=[],E={info:function(){},render:function(){return t(a,a.style,E)},update:function(e){Object.assign(a,e),y.that(o,"updated")},model:function(){return function(e){return Object.assign({},e)}(a)},style:function(e,t){return S.setCssVariable(e,t)},bind:function(e){"function"==typeof e&&k.push(e)}},I=0,P=Object.keys(O);I<P.length;I++){var C=P[I];if(-1!==w.indexOf(C))throw"Component name use a restricted sticky word";E[C]=g(O[C])}if(A)for(var T=0,x=Object.entries(A);T<x.length;T++){var M=i(x[T],2),z=M[0],N=M[1];if(!E[z])throw"Initialization use a wrong component name";E[z].update(N)}return E}("function"==typeof e?e():e)}var w=["info","render","update","model","bind","style"];function j(){}return e.controller=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,r=g(e),a=function(){return t(n,r.render)};return y.all(o,(function(){a()})),r},e.sticky=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
